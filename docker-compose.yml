version: '3.8'
services:
  user-ms:
    build: ./user-service-directory
    ports:
      - "8081:8080" # El MS Users usa 8080 internamente, expuesto en 8081 en el host
    environment:
      # ... variables de la BD de Usuarios
      SERVER_PORT: 8080

  restaurant-ms:
    build: ./restaurant-service-directory
    ports:
      - "8082:8080" # El MS Restaurant usa 8080 internamente, expuesto en 8082 en el host
    environment:
      # ... variables de la BD de Restaurantes
      SERVER_PORT: 8080
    depends_on:
      - user-ms

  mysql-db:
    image: mysql:8.0 # Imagen oficial de MySQL
    container_name: mysql_powerup_db_restaurant
    restart: always
    environment:
      # Las variables de entorno para MySQL deben coincidir con tu aplicaci√≥n
      MYSQL_ROOT_PASSWORD: secret123
      MYSQL_DATABASE: powerup_db
    ports:
      - "3307:3306"